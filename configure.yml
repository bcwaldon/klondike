- hosts: 127.0.0.1
  connection: local
  gather_facts: False
  roles:
  - pki
  vars_files:
  - "{{ playbook_dir }}/vars/main.yml"
  vars:
    ca_dir: "{{playbook_dir}}/files/ca-{{ ca_name }}"
    workspace: "{{ playbook_dir }}/tmp"
    ca_vars_file: "{{ playbook_dir }}/vars/pki-{{ ca_name }}-ca.yml"
    client_vars_file: "{{ playbook_dir }}/vars/pki-{{ ca_name }}-clients.yml"
    clients:
    - name: apiserver
      profile: server
      hosts:
      - "{{ control_plane_host }}"
      - "{{ cluster_service_kubernetes_ip }}"
    - name: admin
      profile: client
      hosts: []
